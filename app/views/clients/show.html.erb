<div class="container">
  <div class="d-flex">
    <h4 class="mt-3">Fiche client</h4>
    <div class="mt-3">
      <%= link_to new_client_commentaire_path(@client) do %>
      <svg width="3em" height="1.5em" viewBox="0 0 16 16" class="bi bi-card-text" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
        <path fill-rule="evenodd" d="M14.5 3h-13a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13z"/>
        <path fill-rule="evenodd" d="M3 5.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM3 8a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 8zm0 2.5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5z"/>
      </svg>
      <% end  %>
    </div>
  </div>
  <div class="d-flex">
    <div class="card" style="margin-top: 8px">
      <ul class="list-group list-group-flush">
        <div class="card-header">
          <h4 class="font-weight-bold"><%= @client.entreprise %></h4>
          <li class="list-group-item font-weight-bold"><%= @client.prenom %> <%= @client.nom %></li>
        </div>
        <li class="list-group-item">Catégorie: <%= @client.categorie %></li>
        <li class="list-group-item">Type de client: <%= @client.fidelite %></li>
        <li class="list-group-item">Informations: <%= @client.information %></li>
        <li class="list-group-item">Portable: <%= @client.telephone_1 %></li>
        <li class="list-group-item">Fixe: <%= @client.telephone_2 %></li>
        <li class="list-group-item">Adresse: <%= @client.adresse %></li>
        <li class="list-group-item">Email: <%= @client.email %></li>
      </ul>
    </div>
  </div>
  <div class="d-flex">
    <div class="ml-2">
      <%= link_to 'Modifier', edit_client_path %>
    </div>
    <div class="ml-2">
      <%= link_to "Supprimer", client_path, method: :delete, class:"text-dark" %>
    </div>
  </div>
  <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#modal-chantier" >Ajouter un chantier</button>
  <div>
    <%= link_to 'Retour', clients_path(@client) %>
  </div>
  <div class="modal fade" id="modal-chantier" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Nouveau chantier</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <div class="container col-9">
              <%= simple_form_for [ @chantier]  do |f| %>
              <%= f.input :reference %>
              <%= f.input :client_id, collection: @clients, :label_method => :nom,:value_method => :id  %>
              <%= f.input :nom %>
              <%= f.input :description %>
              <%= f.input :statut %>
              <%= f.input :priorite %>
              <%= f.input :date_debut, class:"flatpickr js-flatpickr-dateTime", placeholder:"Selectionnez vos dates" %>
              <%= f.input :date_fin_estimee %>
              <%= f.input :date_fin %>
              <%= f.input :adresse %>
              <%= f.input :montant_versement %>
              <%= f.input :avancement %>
              <%= f.input :photos, as: :file, input_html: { multiple: true } %>
              <%= f.submit "Ajouter", class: "btn btn-success mt-2", style: "width: 100%"  %>
              <% end %>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="card">
    <% @chantiers.each do |chantier|  %>
    <div class="fiche-chantier-client">
      <div><p>Reférence: <%= chantier.reference %></p></div>
      <div><p>Nom du chantier: <%= chantier.nom %></p></div>
      <div class="d-flex">
      <div><p>Priorité: <%= chantier.priorite %></p></div>
      <div><p>Statut: <%= chantier.statut %></p></div>
      </div>
      <div class="d-flex">
        <div class="ml-2">
          <%= link_to "Voir", chantier_path(chantier)  %>
        </div>
        <div class="ml-2">
          <%= link_to "Modifier", edit_chantier_path(chantier)  %>
        </div>
      </div>
      <% end %>
    </div>
  </div>
